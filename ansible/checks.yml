---
# V√©rifications pr√©requis
# V√©rification Node.js
- name: V√©rification Node.js
  command: node --version
  register: node_version
  failed_when: node_version.rc != 0

- name: V√©rification npm
  command: npm --version
  register: npm_version
  failed_when: npm_version.rc != 0

# V√©rification Docker (optionnel - d√©commentez si n√©cessaire)
# - name: V√©rification Docker
#   command: docker --version
#   register: docker_version
#   failed_when: docker_version.rc != 0

# - name: V√©rification Docker Compose
#   command: docker-compose --version
#   register: compose_version
#   failed_when: compose_version.rc != 0

# V√©rification des ports
- name: V√©rification ports disponibles
  wait_for:
    port: "{{ item }}"
    host: localhost
    timeout: 2
    state: stopped
  loop:
    - 3000  # Frontend
    - 4000  # Backend
    - 5432  # PostgreSQL
    - 6379  # Redis
    - 8200  # Vault
  failed_when: false

# V√©rification Git
- name: V√©rification Git
  command: git --version
  register: git_version
  failed_when: git_version.rc != 0

# Affichage des versions
- name: Affichage des versions
  debug:
    msg: |
      ‚úÖ Pr√©requis valid√©s :
      - Node.js: {{ node_version.stdout }}
      - npm: {{ npm_version.stdout }}
      - Git: {{ git_version.stdout }}
      
      üìù Note: V√©rifications Docker d√©sactiv√©es (suppos√©es d√©j√† install√©es)
      üí° Pour activer les v√©rifications Docker, d√©commentez les lignes correspondantes
